<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BufferUtils: BufferUtils</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BufferUtils
   </div>
   <div id="projectbrief">An Arduino library to facilitate working with raw byte arrays.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BufferUtils </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/bakercp/BufferUtils"></a></p>
<h2>Description</h2>
<p>An Arduino library to facilitate working with raw byte arrays.</p>
<h2>Features</h2>
<ul>
<li>Javascript <code>DataView</code> style byte buffer access for reading (<code><a class="el" href="class_buffer_reader.html" title="A class for reading various types from a raw data byte buffer. ">BufferReader</a></code>) and writing (<code><a class="el" href="class_buffer_writer.html" title="A class for writing various types to a raw data byte buffer. ">BufferWriter</a></code>).</li>
<li>A <code>Print</code> interface for a raw byte buffer via <code><a class="el" href="class_buffer_printer.html" title="A class for printing into a raw data byte buffer. ">BufferPrinter</a></code></li>
<li>A circular buffer (aka ring buffer or cyclic buffer) implementation for data arrays of any type in <code>CircularBuffer</code>.</li>
</ul>
<h2>Background</h2>
<p>When working with memory constrained systems, low-level communication protocols and other specialized code, it is very useful to be able to reduce everything down to an array of bytes, (aka byte buffers). Just about all quantitative data can be interpreted as arrays of bytes and this library will help you do that without too much complex C/C++ syntax.</p>
<h2>Use</h2>
<h3><a class="el" href="class_buffer_reader.html" title="A class for reading various types from a raw data byte buffer. ">BufferReader</a></h3>
<p>Say you have an array of bytes representing a communication packet with the form</p>
<div class="fragment"><div class="line">PACKET TYPE uint16_t</div><div class="line">PACKET LENGTH uint32_t</div><div class="line">PACKET DATA variable array of uint8_t</div><div class="line">CRC32 CHECKSUM uint32_t</div></div><!-- fragment --><p>One could read this data from the buffer like so:</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">uint8_t rawData[128] = { 0x00, 0x01, ..., 0x22 };</div><div class="line"></div><div class="line">uint16_t packetType;</div><div class="line">uint32_t packetLength;</div><div class="line">uint8_t data[256];</div><div class="line">uint32_t checksum;</div><div class="line"></div><div class="line">BufferReader reader(rawData, 128);</div><div class="line"></div><div class="line">// Fill packetType with the correct value.</div><div class="line">reader.read(packetType);</div><div class="line"></div><div class="line">// Fill packet length with the correct value.</div><div class="line">reader.read(packetLength);</div><div class="line"></div><div class="line">// Fill the data with the correct data using the variable packet length.</div><div class="line">reader.read(data, packetLength);</div><div class="line"></div><div class="line">// Fill the checksum.</div><div class="line">reader.read(checksum);</div></div><!-- fragment --><p>The <code><a class="el" href="class_buffer_reader.html" title="A class for reading various types from a raw data byte buffer. ">BufferReader</a></code> keeps track of the current read position based on the sizes of the data types read. Each <code>read</code> operation returns the number of bytes read, or zero if there is a read error (e.g. running out of buffer to read). Note the above example doesn't have any error checking.</p>
<h3><a class="el" href="class_buffer_writer.html" title="A class for writing various types to a raw data byte buffer. ">BufferWriter</a></h3>
<p>Similarly, if we want to write a packet like that described above we might do the following:</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">uint8_t sendBuffer[128];</div><div class="line"></div><div class="line">uint16_t packetType = 13;</div><div class="line">uint32_t packetLength = 11;</div><div class="line">uint8_t data[11] = { &#39;H&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39; &#39;, &#39;W&#39;, &#39;o&#39;, &#39;r&#39;, &#39;l&#39;, &#39;d&#39; };</div><div class="line">uint32_t checksum = 0x4A17B156;</div><div class="line"></div><div class="line">BufferWriter writer(sendBuffer, 128);</div><div class="line"></div><div class="line">// Write the packetType to the send buffer.</div><div class="line">writer.write(packetType);</div><div class="line"></div><div class="line">// Write the packetLength to the send buffer.</div><div class="line">writer.write(packetLength);</div><div class="line"></div><div class="line">// Write the data to the send buffer.</div><div class="line">reader.read(data, packetLength);</div><div class="line"></div><div class="line">// Write the checksum.</div><div class="line">reader.read(checksum);</div><div class="line"></div><div class="line">// Send the data that was written to the buffer.</div><div class="line">Serial.write(sendBuffer, reader.getOffset());</div></div><!-- fragment --><h3><a class="el" href="class_buffer_printer.html" title="A class for printing into a raw data byte buffer. ">BufferPrinter</a></h3>
<p><code><a class="el" href="class_buffer_printer.html" title="A class for printing into a raw data byte buffer. ">BufferPrinter</a></code> is much like <code><a class="el" href="class_buffer_writer.html" title="A class for writing various types to a raw data byte buffer. ">BufferWriter</a></code> but implements the Arduino <code>Print</code> interface.</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">uint8_t bufferToFill[128];</div><div class="line"></div><div class="line">BufferPrinter printer(bufferToFill, 128);</div><div class="line"></div><div class="line">// Write the packetType to the send buffer.</div><div class="line">printer.println(&quot;Hello there.&quot;);</div><div class="line"></div><div class="line">// All Print commands are available.</div><div class="line">printer.print(&quot;.&quot;);</div><div class="line"></div><div class="line">// Print commands including ASCII translations.</div><div class="line">printer.print(99, HEX);</div><div class="line"></div><div class="line">// Send the data that was written to the buffer.</div><div class="line">Serial.write(bufferToFill, printer.getOffset());</div></div><!-- fragment --><h3>CircularBuffer</h3>
<p>See the <code>CircularBuffer</code> example.</p>
<h2>Examples</h2>
<p>See the included examples and tests for further usage examples.</p>
<h2>Changelog</h2>
<p>See CHANGELOG.md</p>
<h2>License</h2>
<p>See LICENSE.md </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Nov 22 2017 00:52:50 for BufferUtils by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
